"use strict";(self.webpackChunkSistema_Contable=self.webpackChunkSistema_Contable||[]).push([[650],{7650:(ve,x,i)=>{i.r(x),i.d(x,{ProveedoresModule:()=>ue});var p=i(9299),s=i(5861),F=i(8739),g=i(6308),m=i(7155),_=i(7120),e=i(4650),y=i(5938),D=i(2628),f=i(2340),N=i(529);let b=(()=>{class o{constructor(t){this.http=t,this.endpoint="proveedor"}getAll(){var t=this;return(0,s.Z)(function*(){return t.http.get(f.N.api.url+t.endpoint).toPromise()})()}getByID(t){var r=this;return(0,s.Z)(function*(){return r.http.get(f.N.api.url+r.endpoint+"/"+t).toPromise()})()}save(t){var r=this;return(0,s.Z)(function*(){return r.http.post(f.N.api.url+r.endpoint,t).toPromise()})()}delete(t){var r=this;return(0,s.Z)(function*(){return r.http.delete(f.N.api.url+r.endpoint+"/"+t).toPromise()})()}update(t,r){var a=this;return(0,s.Z)(function*(){return a.http.put(f.N.api.url+a.endpoint+"/"+t,r).toPromise()})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(N.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var h=i(4859),U=i(7392),S=i(4850),u=i(3546),Z=i(8255),I=i(7506),Q=i(6706);function Y(o,n){1&o&&(e.TgZ(0,"th",28),e._uU(1,"ID"),e.qZA())}function J(o,n){if(1&o&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.proveedorID," ")}}function L(o,n){1&o&&(e.TgZ(0,"th",28),e._uU(1,"Codigo"),e.qZA())}function q(o,n){if(1&o&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.codigo," ")}}function w(o,n){1&o&&(e.TgZ(0,"th",28),e._uU(1,"Nombre"),e.qZA())}function P(o,n){if(1&o&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.nombre," ")}}function j(o,n){1&o&&(e.TgZ(0,"th",28),e._uU(1,"Cuenta Contable"),e.qZA())}function E(o,n){if(1&o&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.AsE(" ",t.cuenta.codigo,". ",t.cuenta.nombre," ")}}function M(o,n){1&o&&(e.TgZ(0,"th",28),e._uU(1,"NIT"),e.qZA())}function B(o,n){if(1&o&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.nit," ")}}function O(o,n){1&o&&(e.TgZ(0,"th",30),e._uU(1,"Acciones"),e.qZA())}function H(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"td",31)(1,"div",32)(2,"button",33)(3,"mat-icon"),e._uU(4,"more_vert"),e.qZA()(),e.TgZ(5,"mat-menu",null,34)(7,"button",35),e.NdJ("click",function(){const d=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.edit(d))}),e._uU(8,"Editar"),e.qZA(),e._UZ(9,"mat-divider"),e.TgZ(10,"button",36),e.NdJ("click",function(){const d=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.delete(d))}),e._uU(11," Eliminar "),e.qZA()()()()}if(2&o){const t=e.MAs(6);e.xp6(2),e.Q6J("matMenuTriggerFor",t)}}function R(o,n){1&o&&e._UZ(0,"tr",37)}function G(o,n){1&o&&e._UZ(0,"tr",38)}const $=function(){return[25,50,100]};let z=(()=>{class o{constructor(t,r,a,d){this.router=t,this.dialog=r,this.notificationsService=a,this.proveedoresService=d,this.dataSource=new m.by,this.columns=["proveedorID","codigo","nombre","nit","cuentaContable","actions"]}ngOnInit(){this.getData()}getData(){var t=this;return(0,s.Z)(function*(){t.listProveedores=yield t.proveedoresService.getAll(),t.dataSource=new m.by(t.listProveedores)})()}new(){this.router.navigate(["/workspace/catalogos/proveedores/nuevo"])}edit(t){this.router.navigate(["/workspace/catalogos/proveedores/edit",t.proveedorID])}delete(t){var r=this;this.dialog.open(_.$,{width:"95%",maxWidth:"500px",data:{message:"\xbfEsta seguro que desea eliminarlo?",submit:"Aceptar",cancel:"Cancelar"}}).afterClosed().subscribe(function(){var d=(0,s.Z)(function*(c){c&&(yield r.proveedoresService.delete(t.proveedorID).then(()=>{r.notificationsService.success(),r.getData()}).catch(T=>r.notificationsService.errorCatched(T)))});return function(c){return d.apply(this,arguments)}}())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.F0),e.Y36(y.uw),e.Y36(D.T),e.Y36(b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-list"]],viewQuery:function(t,r){if(1&t&&(e.Gf(F.NW,7),e.Gf(g.YE,7)),2&t){let a;e.iGM(a=e.CRH())&&(r.paginator=a.first),e.iGM(a=e.CRH())&&(r.sort=a.first)}},decls:41,vars:8,consts:[[1,"container-fluid"],[1,"d-flex","flex-wrap","justify-content-between"],[1,"d-flex","align-items-center","txt-blue2","mb-4"],[1,"title"],[1,"row"],[1,"col-md-10"],[3,"dataSource"],[1,"col-md-2","d-flex","justify-content-end"],["mat-raised-button","",1,"bg-blue3","txt-white","squared-button","w-auto",3,"click"],[3,"loading"],[1,"row",3,"hidden"],[1,"col-sm-12"],[1,"table-container"],["mat-table","","matSort","","matSortActive","key","matSortDirection","asc","appTableQuery","",1,"table-responsive-sm","table-hover",3,"dataSource"],["matColumnDef","proveedorID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","codigo"],["matColumnDef","nombre"],["matColumnDef","cuentaContable"],["matColumnDef","nit"],["matColumnDef","actions"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"d-flex","flex-column-reverse","flex-md-row","align-items-center","justify-content-between"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],[1,"d-flex","justify-content-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"txt-red3",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4," Proveedores "),e.qZA()()(),e.TgZ(5,"div",4)(6,"div",5),e._UZ(7,"app-search-bar",6),e.qZA(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){return r.new()}),e._uU(10," Crear nuevo "),e.qZA()()(),e._UZ(11,"app-circular-loading",9),e.TgZ(12,"div",10)(13,"div",11)(14,"mat-card")(15,"mat-card-content")(16,"div")(17,"div",12)(18,"table",13),e.ynx(19,14),e.YNc(20,Y,2,0,"th",15),e.YNc(21,J,2,1,"td",16),e.BQk(),e.ynx(22,17),e.YNc(23,L,2,0,"th",15),e.YNc(24,q,2,1,"td",16),e.BQk(),e.ynx(25,18),e.YNc(26,w,2,0,"th",15),e.YNc(27,P,2,1,"td",16),e.BQk(),e.ynx(28,19),e.YNc(29,j,2,0,"th",15),e.YNc(30,E,2,2,"td",16),e.BQk(),e.ynx(31,20),e.YNc(32,M,2,0,"th",15),e.YNc(33,B,2,1,"td",16),e.BQk(),e.ynx(34,21),e.YNc(35,O,2,0,"th",22),e.YNc(36,H,12,1,"td",23),e.BQk(),e.YNc(37,R,1,0,"tr",24),e.YNc(38,G,1,0,"tr",25),e.qZA()(),e.TgZ(39,"div",26),e._UZ(40,"mat-paginator",27),e.qZA()()()()()()()),2&t&&(e.xp6(7),e.Q6J("dataSource",r.dataSource),e.xp6(4),e.Q6J("loading",r.loading),e.xp6(1),e.Q6J("hidden",r.loading),e.xp6(6),e.Q6J("dataSource",r.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",r.columns),e.xp6(1),e.Q6J("matRowDefColumns",r.columns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(7,$)))},dependencies:[h.lW,U.Hw,S.d,u.a8,u.dn,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,g.YE,g.nU,F.NW,Z.VK,Z.OP,Z.p6,I.s,Q.N]}),o})();var l=i(4006),K=i(2474),k=i(597),C=i(6895),v=i(9549),W=i(4144),X=i(4385),V=i(3238),ee=i(9429);function te(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"formErrorHandler"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.codigoField))}}function oe(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"formErrorHandler"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.nombreField))}}function re(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"formErrorHandler"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.nitField))}}function ne(o,n){if(1&o&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.empresaID),e.xp6(1),e.hij(" ",t.nombre," ")}}function ie(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"formErrorHandler"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,t.empresaIDField)," ")}}function ae(o,n){if(1&o&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.cuentaID),e.xp6(1),e.AsE(" ",t.codigo,". ",t.nombre," ")}}function le(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"formErrorHandler"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,t.cuentaIDField)," ")}}const me=function(){return["/workspace/catalogos/proveedores"]};let A=(()=>{class o{constructor(t,r,a,d,c,T,pe){this.proveedoresService=t,this.formBuilder=r,this.activeRoute=a,this.router=d,this.notificationsService=c,this.cuentasContablesService=T,this.empresaService=pe,this.loading=!0,this.buildForm(),this.router.url.includes("/nuevo")?(this.edit=!1,this.baseKey="nuevo"):(this.activeRoute.params.subscribe(fe=>{this.proveedorID=Number(fe.ID)}),this.edit=!0,this.baseKey="edit",this.patchForm())}ngOnInit(){var t=this;return(0,s.Z)(function*(){t.loading=!1,t.listCuentas=yield t.cuentasContablesService.getAll(),t.listEmpresas=yield t.empresaService.getAll()})()}create(t){t.preventDefault(),this.edit?this.update():this.save(),this.edit=!1}save(){var t=this;return(0,s.Z)(function*(){if(!0===t.form.valid){const r={codigo:t.codigoField.value,nombre:t.nombreField.value,empresaID:t.empresaIDField.value,cuentaID:t.cuentaIDField.value,nit:t.nitField.value};yield t.proveedoresService.save(r).then(()=>{t.notificationsService.success(),t.router.navigate(["/workspace/catalogos/proveedores"])}).catch(a=>t.notificationsService.errorCatched(a)).finally(()=>t.loading=!1)}})()}update(){var t=this;return(0,s.Z)(function*(){if(!0===t.form.valid){const r={proveedorID:t.proveedorID,codigo:t.codigoField.value,nombre:t.nombreField.value,empresaID:t.empresaIDField.value,cuentaID:t.cuentaIDField.value,nit:t.nitField.value};yield t.proveedoresService.update(t.proveedorID,r).then(()=>{t.notificationsService.success(),t.router.navigate(["/workspace/catalogos/proveedores"])}).catch(a=>t.notificationsService.errorCatched(a)).finally(()=>t.loading=!1)}})()}buildForm(){this.form=this.formBuilder.group({codigo:["",[l.kI.required]],nombre:["",[l.kI.required]],empresaID:["",[l.kI.required]],cuentaID:["",[l.kI.required]],nit:["",[l.kI.required]]})}patchForm(){var t=this;return(0,s.Z)(function*(){t.proveedor=yield t.proveedoresService.getByID(t.proveedorID),t.form.patchValue({codigo:t.proveedor.codigo,nombre:t.proveedor.nombre,empresaID:t.proveedor.empresaID,cuentaID:t.proveedor.cuentaID,nit:t.proveedor.nit})})()}get codigoField(){return this.form.get("codigo")}get nombreField(){return this.form.get("nombre")}get empresaIDField(){return this.form.get("empresaID")}get cuentaIDField(){return this.form.get("cuentaID")}get nitField(){return this.form.get("nit")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(l.QS),e.Y36(p.gz),e.Y36(p.F0),e.Y36(D.T),e.Y36(K.V),e.Y36(k.o))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-form"]],decls:64,vars:19,consts:[[1,"container-fluid"],[1,"d-flex","flex-wrap","justify-content-between"],[1,"d-flex","align-items-center","txt-blue2","mb-4"],[1,"title"],[3,"loading"],[1,"row",3,"hidden"],[1,"col-sm-12"],["form","form",3,"formGroup","ngSubmit"],[1,"subheader"],[1,"row"],[1,"form-group"],["appearance","outline"],["appTrim","","matInput","","type","text","formControlName","codigo","minlength","1","maxlength","20",3,"formControl"],[4,"ngIf"],["align","end"],["appTrim","","matInput","","type","text","formControlName","nombre","minlength","1","maxlength","20",3,"formControl"],["appTrim","","matInput","","type","text","formControlName","nit","minlength","1","maxlength","20",3,"formControl"],["formControlName","empresaID","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","cuentaID"],[1,"form-group",2,"text-align","right !important"],["mat-button","",1,"w-auto",3,"routerLink"],["mat-raised-button","","type","submit",1,"bg-blue3","txt-white","squared-button","w-auto"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4," Proveedores "),e.qZA()()(),e._UZ(5,"app-circular-loading",4),e.TgZ(6,"div",5)(7,"div",6)(8,"form",7),e.NdJ("ngSubmit",function(d){return r.create(d)}),e.TgZ(9,"mat-card")(10,"mat-card-header")(11,"mat-card-title")(12,"span",8),e._uU(13),e.qZA()()(),e.TgZ(14,"mat-card-content")(15,"div",9)(16,"div",6)(17,"div",10)(18,"mat-form-field",11)(19,"mat-label"),e._uU(20," Codigo "),e.qZA(),e._UZ(21,"input",12),e.YNc(22,te,3,3,"mat-error",13),e.TgZ(23,"mat-hint",14),e._uU(24),e.qZA()()()(),e.TgZ(25,"div",6)(26,"div",10)(27,"mat-form-field",11)(28,"mat-label"),e._uU(29," Nombre "),e.qZA(),e._UZ(30,"input",15),e.YNc(31,oe,3,3,"mat-error",13),e.TgZ(32,"mat-hint",14),e._uU(33),e.qZA()()()(),e.TgZ(34,"div",6)(35,"div",10)(36,"mat-form-field",11)(37,"mat-label"),e._uU(38," NIT "),e.qZA(),e._UZ(39,"input",16),e.YNc(40,re,3,3,"mat-error",13),e.TgZ(41,"mat-hint",14),e._uU(42),e.qZA()()()(),e.TgZ(43,"div",6)(44,"div",10)(45,"mat-form-field",11)(46,"mat-label"),e._uU(47," Empresa "),e.qZA(),e.TgZ(48,"mat-select",17),e.YNc(49,ne,2,2,"mat-option",18),e.qZA(),e.YNc(50,ie,3,3,"mat-error",13),e.qZA()()(),e.TgZ(51,"div",6)(52,"div",10)(53,"mat-form-field",11)(54,"mat-label"),e._uU(55," Cuenta "),e.qZA(),e.TgZ(56,"mat-select",19),e.YNc(57,ae,2,3,"mat-option",18),e.qZA(),e.YNc(58,le,3,3,"mat-error",13),e.qZA()()()()(),e.TgZ(59,"mat-card-actions",20)(60,"a",21),e._uU(61," Cancelar "),e.qZA(),e.TgZ(62,"button",22),e._uU(63," Guardar "),e.qZA()()()()()()()),2&t&&(e.xp6(5),e.Q6J("loading",r.loading),e.xp6(1),e.Q6J("hidden",r.loading),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(5),e.Oqu("nuevo"===r.baseKey?"Nuevo Proveedor":"Editar Proveedor"),e.xp6(8),e.Q6J("formControl",r.codigoField),e.xp6(1),e.Q6J("ngIf",r.codigoField.errors),e.xp6(2),e.hij("",null==r.codigoField.value?null:r.codigoField.value.length," / 2"),e.xp6(6),e.Q6J("formControl",r.nombreField),e.xp6(1),e.Q6J("ngIf",r.nombreField.errors),e.xp6(2),e.hij("",null==r.nombreField.value?null:r.nombreField.value.length," / 20"),e.xp6(6),e.Q6J("formControl",r.nitField),e.xp6(1),e.Q6J("ngIf",r.nitField.errors),e.xp6(2),e.hij("",null==r.nitField.value?null:r.nitField.value.length," / 20"),e.xp6(7),e.Q6J("ngForOf",r.listEmpresas),e.xp6(1),e.Q6J("ngIf",r.empresaIDField.errors),e.xp6(7),e.Q6J("ngForOf",r.listCuentas),e.xp6(1),e.Q6J("ngIf",r.cuentaIDField.errors),e.xp6(2),e.Q6J("routerLink",e.DdM(18,me)))},dependencies:[C.sg,C.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.wO,l.nD,l.oH,l.sg,l.u,h.lW,h.zs,u.a8,u.dk,u.dn,u.n5,u.hq,v.TO,v.KE,v.bx,v.hX,W.Nt,X.gD,V.ey,I.s,p.yS,ee.P]}),o})();const se=[{path:"",component:z},{path:"nuevo",component:A},{path:"edit/:ID",component:A}];let de=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(se),p.Bz]}),o})();var ce=i(4185);let ue=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.ez,ce.m,de]}),o})()}}]);