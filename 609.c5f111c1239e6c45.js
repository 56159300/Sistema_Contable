"use strict";(self.webpackChunkSistema_Contable=self.webpackChunkSistema_Contable||[]).push([[609],{4609:(vt,x,r)=>{r.r(x),r.d(x,{ClientesModule:()=>ft});var p=r(9299),c=r(5861),_=r(8739),h=r(6308),m=r(7155),I=r(7120),t=r(4650),y=r(5938),D=r(2628),f=r(2340),N=r(529);let F=(()=>{class n{constructor(e){this.http=e,this.endpoint="cliente"}getAll(){var e=this;return(0,c.Z)(function*(){return e.http.get(f.N.api.url+e.endpoint).toPromise()})()}getByID(e){var o=this;return(0,c.Z)(function*(){return o.http.get(f.N.api.url+o.endpoint+"/"+e).toPromise()})()}save(e){var o=this;return(0,c.Z)(function*(){return o.http.post(f.N.api.url+o.endpoint,e).toPromise()})()}delete(e){var o=this;return(0,c.Z)(function*(){return o.http.delete(f.N.api.url+o.endpoint+"/"+e).toPromise()})()}update(e,o){var a=this;return(0,c.Z)(function*(){return a.http.put(f.N.api.url+a.endpoint+"/"+e,o).toPromise()})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(N.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=r(4859),U=r(7392),S=r(4850),d=r(3546),Z=r(8255),b=r(7506),Y=r(6706);function Q(n,i){1&n&&(t.TgZ(0,"th",29),t._uU(1,"ID"),t.qZA())}function L(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.clienteID," ")}}function J(n,i){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Codigo"),t.qZA())}function q(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.codigo," ")}}function w(n,i){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Nombre"),t.qZA())}function j(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.nombre," ")}}function E(n,i){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Empresa"),t.qZA())}function B(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.empresa.nombre," ")}}function M(n,i){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Cuenta Contable"),t.qZA())}function O(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.AsE(" ",e.cuenta.codigo,". ",e.cuenta.nombre," ")}}function H(n,i){1&n&&(t.TgZ(0,"th",29),t._uU(1,"NIT"),t.qZA())}function R(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.nit," ")}}function G(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1,"Acciones"),t.qZA())}function $(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",32)(1,"div",33)(2,"button",34)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,35)(7,"button",36),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.edit(s))}),t._uU(8,"Editar"),t.qZA(),t._UZ(9,"mat-divider"),t.TgZ(10,"button",37),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.delete(s))}),t._uU(11," Eliminar "),t.qZA()()()()}if(2&n){const e=t.MAs(6);t.xp6(2),t.Q6J("matMenuTriggerFor",e)}}function z(n,i){1&n&&t._UZ(0,"tr",38)}function K(n,i){1&n&&t._UZ(0,"tr",39)}const P=function(){return[25,50,100]};let k=(()=>{class n{constructor(e,o,a,s){this.router=e,this.dialog=o,this.notificationsService=a,this.clientesService=s,this.dataSource=new m.by,this.columns=["clienteID","codigo","nombre","nit","empresa","cuentaContable","actions"]}ngOnInit(){this.getData()}getData(){var e=this;return(0,c.Z)(function*(){e.listClientes=yield e.clientesService.getAll(),e.dataSource=new m.by(e.listClientes)})()}new(){this.router.navigate(["/workspace/catalogos/clientes/nuevo"])}edit(e){this.router.navigate(["/workspace/catalogos/clientes/edit",e.clienteID])}delete(e){var o=this;this.dialog.open(I.$,{width:"95%",maxWidth:"500px",data:{message:"\xbfEsta seguro que desea eliminarlo?",submit:"Aceptar",cancel:"Cancelar"}}).afterClosed().subscribe(function(){var s=(0,c.Z)(function*(u){u&&(yield o.clientesService.delete(e.clienteID).then(()=>{o.notificationsService.success(),o.getData()}).catch(T=>o.notificationsService.errorCatched(T)))});return function(u){return s.apply(this,arguments)}}())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F0),t.Y36(y.uw),t.Y36(D.T),t.Y36(F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(e,o){if(1&e&&(t.Gf(_.NW,7),t.Gf(h.YE,7)),2&e){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first),t.iGM(a=t.CRH())&&(o.sort=a.first)}},decls:44,vars:8,consts:[[1,"container-fluid"],[1,"d-flex","flex-wrap","justify-content-between"],[1,"d-flex","align-items-center","txt-blue2","mb-4"],[1,"title"],[1,"row"],[1,"col-md-10"],[3,"dataSource"],[1,"col-md-2","d-flex","justify-content-end"],["mat-raised-button","",1,"bg-blue3","txt-white","squared-button","w-auto",3,"click"],[3,"loading"],[1,"row",3,"hidden"],[1,"col-sm-12"],[1,"table-container"],["mat-table","","matSort","","matSortActive","key","matSortDirection","asc","appTableQuery","",1,"table-responsive-sm","table-hover",3,"dataSource"],["matColumnDef","clienteID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","codigo"],["matColumnDef","nombre"],["matColumnDef","empresa"],["matColumnDef","cuentaContable"],["matColumnDef","nit"],["matColumnDef","actions"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"d-flex","flex-column-reverse","flex-md-row","align-items-center","justify-content-between"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],[1,"d-flex","justify-content-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"txt-red3",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4," Clientes "),t.qZA()()(),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"app-search-bar",6),t.qZA(),t.TgZ(8,"div",7)(9,"button",8),t.NdJ("click",function(){return o.new()}),t._uU(10," Crear nuevo "),t.qZA()()(),t._UZ(11,"app-circular-loading",9),t.TgZ(12,"div",10)(13,"div",11)(14,"mat-card")(15,"mat-card-content")(16,"div")(17,"div",12)(18,"table",13),t.ynx(19,14),t.YNc(20,Q,2,0,"th",15),t.YNc(21,L,2,1,"td",16),t.BQk(),t.ynx(22,17),t.YNc(23,J,2,0,"th",15),t.YNc(24,q,2,1,"td",16),t.BQk(),t.ynx(25,18),t.YNc(26,w,2,0,"th",15),t.YNc(27,j,2,1,"td",16),t.BQk(),t.ynx(28,19),t.YNc(29,E,2,0,"th",15),t.YNc(30,B,2,1,"td",16),t.BQk(),t.ynx(31,20),t.YNc(32,M,2,0,"th",15),t.YNc(33,O,2,2,"td",16),t.BQk(),t.ynx(34,21),t.YNc(35,H,2,0,"th",15),t.YNc(36,R,2,1,"td",16),t.BQk(),t.ynx(37,22),t.YNc(38,G,2,0,"th",23),t.YNc(39,$,12,1,"td",24),t.BQk(),t.YNc(40,z,1,0,"tr",25),t.YNc(41,K,1,0,"tr",26),t.qZA()(),t.TgZ(42,"div",27),t._UZ(43,"mat-paginator",28),t.qZA()()()()()()()),2&e&&(t.xp6(7),t.Q6J("dataSource",o.dataSource),t.xp6(4),t.Q6J("loading",o.loading),t.xp6(1),t.Q6J("hidden",o.loading),t.xp6(6),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.columns),t.xp6(1),t.Q6J("matRowDefColumns",o.columns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(7,P)))},dependencies:[v.lW,U.Hw,S.d,d.a8,d.dn,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,h.YE,h.nU,_.NW,Z.VK,Z.OP,Z.p6,b.s,Y.N]}),n})();var l=r(4006),W=r(2474),X=r(597),C=r(6895),g=r(9549),V=r(4144),tt=r(4385),et=r(3238),nt=r(9429);function ot(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"formErrorHandler"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.codigoField))}}function it(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"formErrorHandler"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.nombreField))}}function rt(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"formErrorHandler"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.nitField))}}function at(n,i){if(1&n&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.empresaID),t.xp6(1),t.hij(" ",e.nombre," ")}}function lt(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"formErrorHandler"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.empresaIDField)," ")}}function mt(n,i){if(1&n&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.cuentaID),t.xp6(1),t.AsE(" ",e.codigo,". ",e.nombre," ")}}function ct(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"formErrorHandler"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.cuentaIDField)," ")}}const st=function(){return["/workspace/catalogos/clientes"]};let A=(()=>{class n{constructor(e,o,a,s,u,T,gt){this.clientesService=e,this.formBuilder=o,this.activeRoute=a,this.router=s,this.notificationsService=u,this.cuentasContablesService=T,this.empresaService=gt,this.loading=!0,this.buildForm(),this.router.url.includes("/nuevo")?(this.edit=!1,this.baseKey="nuevo"):(this.activeRoute.params.subscribe(ht=>{this.clienteID=Number(ht.ID)}),this.edit=!0,this.baseKey="edit",this.patchForm())}ngOnInit(){var e=this;return(0,c.Z)(function*(){e.loading=!1,e.listCuentas=yield e.cuentasContablesService.getAll(),e.listEmpresas=yield e.empresaService.getAll()})()}create(e){e.preventDefault(),this.edit?this.update():this.save(),this.edit=!1}save(){var e=this;return(0,c.Z)(function*(){if(!0===e.form.valid){const o={codigo:e.codigoField.value,nombre:e.nombreField.value,empresaID:e.empresaIDField.value,cuentaID:e.cuentaIDField.value,nit:e.nitField.value};yield e.clientesService.save(o).then(()=>{e.notificationsService.success(),e.router.navigate(["/workspace/catalogos/clientes"])}).catch(a=>e.notificationsService.errorCatched(a)).finally(()=>e.loading=!1)}})()}update(){var e=this;return(0,c.Z)(function*(){if(!0===e.form.valid){const o={clienteID:e.clienteID,codigo:e.codigoField.value,nombre:e.nombreField.value,empresaID:e.empresaIDField.value,cuentaID:e.cuentaIDField.value,nit:e.nitField.value};yield e.clientesService.update(e.clienteID,o).then(()=>{e.notificationsService.success(),e.router.navigate(["/workspace/catalogos/clientes"])}).catch(a=>e.notificationsService.errorCatched(a)).finally(()=>e.loading=!1)}})()}buildForm(){this.form=this.formBuilder.group({codigo:["",[l.kI.required]],nombre:["",[l.kI.required]],empresaID:["",[l.kI.required]],cuentaID:[""],nit:["",[l.kI.required]]})}patchForm(){var e=this;return(0,c.Z)(function*(){e.cliente=yield e.clientesService.getByID(e.clienteID),e.form.patchValue({codigo:e.cliente.codigo,nombre:e.cliente.nombre,empresaID:e.cliente.empresaID,cuentaID:e.cliente.cuentaID,nit:e.cliente.nit})})()}get empresaIDField(){return this.form.get("empresaID")}get codigoField(){return this.form.get("codigo")}get nombreField(){return this.form.get("nombre")}get cuentaIDField(){return this.form.get("cuentaID")}get nitField(){return this.form.get("nit")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(F),t.Y36(l.QS),t.Y36(p.gz),t.Y36(p.F0),t.Y36(D.T),t.Y36(W.V),t.Y36(X.o))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-form"]],decls:64,vars:19,consts:[[1,"container-fluid"],[1,"d-flex","flex-wrap","justify-content-between"],[1,"d-flex","align-items-center","txt-blue2","mb-4"],[1,"title"],[3,"loading"],[1,"row",3,"hidden"],[1,"col-sm-12"],["form","form",3,"formGroup","ngSubmit"],[1,"subheader"],[1,"row"],[1,"form-group"],["appearance","outline"],["appTrim","","matInput","","type","text","formControlName","codigo","minlength","1","maxlength","20",3,"formControl"],[4,"ngIf"],["align","end"],["appTrim","","matInput","","type","text","formControlName","nombre","minlength","1","maxlength","20",3,"formControl"],["appTrim","","matInput","","type","text","formControlName","nit","minlength","1","maxlength","20",3,"formControl"],["formControlName","empresaID","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","cuentaID"],[1,"form-group",2,"text-align","right !important"],["mat-button","",1,"w-auto",3,"routerLink"],["mat-raised-button","","type","submit",1,"bg-blue3","txt-white","squared-button","w-auto"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4," Clientes "),t.qZA()()(),t._UZ(5,"app-circular-loading",4),t.TgZ(6,"div",5)(7,"div",6)(8,"form",7),t.NdJ("ngSubmit",function(s){return o.create(s)}),t.TgZ(9,"mat-card")(10,"mat-card-header")(11,"mat-card-title")(12,"span",8),t._uU(13),t.qZA()()(),t.TgZ(14,"mat-card-content")(15,"div",9)(16,"div",6)(17,"div",10)(18,"mat-form-field",11)(19,"mat-label"),t._uU(20," Codigo "),t.qZA(),t._UZ(21,"input",12),t.YNc(22,ot,3,3,"mat-error",13),t.TgZ(23,"mat-hint",14),t._uU(24),t.qZA()()()(),t.TgZ(25,"div",6)(26,"div",10)(27,"mat-form-field",11)(28,"mat-label"),t._uU(29," Nombre "),t.qZA(),t._UZ(30,"input",15),t.YNc(31,it,3,3,"mat-error",13),t.TgZ(32,"mat-hint",14),t._uU(33),t.qZA()()()(),t.TgZ(34,"div",6)(35,"div",10)(36,"mat-form-field",11)(37,"mat-label"),t._uU(38," NIT "),t.qZA(),t._UZ(39,"input",16),t.YNc(40,rt,3,3,"mat-error",13),t.TgZ(41,"mat-hint",14),t._uU(42),t.qZA()()()(),t.TgZ(43,"div",6)(44,"div",10)(45,"mat-form-field",11)(46,"mat-label"),t._uU(47," Empresa "),t.qZA(),t.TgZ(48,"mat-select",17),t.YNc(49,at,2,2,"mat-option",18),t.qZA(),t.YNc(50,lt,3,3,"mat-error",13),t.qZA()()(),t.TgZ(51,"div",6)(52,"div",10)(53,"mat-form-field",11)(54,"mat-label"),t._uU(55," Cuenta "),t.qZA(),t.TgZ(56,"mat-select",19),t.YNc(57,mt,2,3,"mat-option",18),t.qZA(),t.YNc(58,ct,3,3,"mat-error",13),t.qZA()()()()(),t.TgZ(59,"mat-card-actions",20)(60,"a",21),t._uU(61," Cancelar "),t.qZA(),t.TgZ(62,"button",22),t._uU(63," Guardar "),t.qZA()()()()()()()),2&e&&(t.xp6(5),t.Q6J("loading",o.loading),t.xp6(1),t.Q6J("hidden",o.loading),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu("nuevo"===o.baseKey?"Nuevo Cliente":"Editar Cliente"),t.xp6(8),t.Q6J("formControl",o.codigoField),t.xp6(1),t.Q6J("ngIf",o.codigoField.errors),t.xp6(2),t.hij("",null==o.codigoField.value?null:o.codigoField.value.length," / 2"),t.xp6(6),t.Q6J("formControl",o.nombreField),t.xp6(1),t.Q6J("ngIf",o.nombreField.errors),t.xp6(2),t.hij("",null==o.nombreField.value?null:o.nombreField.value.length," / 20"),t.xp6(6),t.Q6J("formControl",o.nitField),t.xp6(1),t.Q6J("ngIf",o.nitField.errors),t.xp6(2),t.hij("",null==o.nitField.value?null:o.nitField.value.length," / 20"),t.xp6(7),t.Q6J("ngForOf",o.listEmpresas),t.xp6(1),t.Q6J("ngIf",o.empresaIDField.errors),t.xp6(7),t.Q6J("ngForOf",o.listCuentas),t.xp6(1),t.Q6J("ngIf",o.cuentaIDField.errors),t.xp6(2),t.Q6J("routerLink",t.DdM(18,st)))},dependencies:[C.sg,C.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.wO,l.nD,l.oH,l.sg,l.u,v.lW,v.zs,d.a8,d.dk,d.dn,d.n5,d.hq,g.TO,g.KE,g.bx,g.hX,V.Nt,tt.gD,et.ey,b.s,p.yS,nt.P]}),n})();const ut=[{path:"",component:k},{path:"nuevo",component:A},{path:"edit/:ID",component:A}];let dt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(ut),p.Bz]}),n})();var pt=r(4185);let ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.ez,pt.m,dt]}),n})()}}]);