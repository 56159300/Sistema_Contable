"use strict";(self.webpackChunkSistema_Contable=self.webpackChunkSistema_Contable||[]).push([[731],{8731:(ct,b,i)=>{i.r(b),i.d(b,{CuentasContablesModule:()=>st});var d=i(9299),p=i(5861),x=i(8739),g=i(6308),s=i(7155),A=i(7120),t=i(4650),I=i(5938),T=i(2628),D=i(2474),h=i(4859),y=i(7392),U=i(4850),u=i(3546),C=i(8255),F=i(7506),S=i(6706);function N(n,a){1&n&&(t.TgZ(0,"th",28),t._uU(1,"ID"),t.qZA())}function Q(n,a){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.cuentaID," ")}}function Y(n,a){1&n&&(t.TgZ(0,"th",28),t._uU(1,"Codigo"),t.qZA())}function J(n,a){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.codigo," ")}}function L(n,a){1&n&&(t.TgZ(0,"th",28),t._uU(1,"Nombre"),t.qZA())}function w(n,a){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.nombre," ")}}function q(n,a){1&n&&(t.TgZ(0,"th",28),t._uU(1,"Empresa"),t.qZA())}function j(n,a){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.empresa.nombre," ")}}function E(n,a){1&n&&(t.TgZ(0,"th",28),t._uU(1,"Cuenta Padre"),t.qZA())}function M(n,a){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.lnq(" ",null==e.padreCuenta?null:e.padreCuenta.codigo," ",e.padreCuenta?".":""," ",null==e.padreCuenta?null:e.padreCuenta.nombre," ")}}function B(n,a){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Acciones"),t.qZA())}function H(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",31)(1,"div",32)(2,"button",33)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,34)(7,"button",35),t.NdJ("click",function(){const m=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.edit(m))}),t._uU(8,"Editar"),t.qZA(),t._UZ(9,"mat-divider"),t.TgZ(10,"button",36),t.NdJ("click",function(){const m=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.delete(m))}),t._uU(11," Eliminar "),t.qZA()()()()}if(2&n){const e=t.MAs(6);t.xp6(2),t.Q6J("matMenuTriggerFor",e)}}function O(n,a){1&n&&t._UZ(0,"tr",37)}function R(n,a){1&n&&t._UZ(0,"tr",38)}const G=function(){return[25,50,100]};let $=(()=>{class n{constructor(e,o,r,m){this.router=e,this.dialog=o,this.notificationsService=r,this.cuentasContablesService=m,this.dataSource=new s.by,this.columns=["cuentaID","codigo","nombre","empresa","padreCuenta","actions"]}ngOnInit(){this.getData()}getData(){var e=this;return(0,p.Z)(function*(){e.listCuenta=yield e.cuentasContablesService.getAll(),e.dataSource=new s.by(e.listCuenta)})()}new(){this.router.navigate(["/workspace/catalogos/cuentas/nuevo"])}edit(e){this.router.navigate(["/workspace/catalogos/cuentas/edit",e.cuentaID])}delete(e){var o=this;this.dialog.open(A.$,{width:"95%",maxWidth:"500px",data:{message:"\xbfEsta seguro que desea eliminarlo?",submit:"Aceptar",cancel:"Cancelar"}}).afterClosed().subscribe(function(){var m=(0,p.Z)(function*(c){c&&(yield o.cuentasContablesService.delete(e.cuentaID).then(()=>{o.notificationsService.success(),o.getData()}).catch(Z=>o.notificationsService.errorCatched(Z)))});return function(c){return m.apply(this,arguments)}}())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.F0),t.Y36(I.uw),t.Y36(T.T),t.Y36(D.V))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(e,o){if(1&e&&(t.Gf(x.NW,7),t.Gf(g.YE,7)),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first),t.iGM(r=t.CRH())&&(o.sort=r.first)}},decls:41,vars:8,consts:[[1,"container-fluid"],[1,"d-flex","flex-wrap","justify-content-between"],[1,"d-flex","align-items-center","txt-blue2","mb-4"],[1,"title"],[1,"row"],[1,"col-md-10"],[3,"dataSource"],[1,"col-md-2","d-flex","justify-content-end"],["mat-raised-button","",1,"bg-blue3","txt-white","squared-button","w-auto",3,"click"],[3,"loading"],[1,"row",3,"hidden"],[1,"col-sm-12"],[1,"table-container"],["mat-table","","matSort","","matSortActive","key","matSortDirection","asc","appTableQuery","",1,"table-responsive-sm","table-hover",3,"dataSource"],["matColumnDef","cuentaID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","codigo"],["matColumnDef","nombre"],["matColumnDef","empresa"],["matColumnDef","padreCuenta"],["matColumnDef","actions"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"d-flex","flex-column-reverse","flex-md-row","align-items-center","justify-content-between"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],[1,"d-flex","justify-content-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"txt-red3",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4," Cuentas Contables "),t.qZA()()(),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"app-search-bar",6),t.qZA(),t.TgZ(8,"div",7)(9,"button",8),t.NdJ("click",function(){return o.new()}),t._uU(10," Crear nuevo "),t.qZA()()(),t._UZ(11,"app-circular-loading",9),t.TgZ(12,"div",10)(13,"div",11)(14,"mat-card")(15,"mat-card-content")(16,"div")(17,"div",12)(18,"table",13),t.ynx(19,14),t.YNc(20,N,2,0,"th",15),t.YNc(21,Q,2,1,"td",16),t.BQk(),t.ynx(22,17),t.YNc(23,Y,2,0,"th",15),t.YNc(24,J,2,1,"td",16),t.BQk(),t.ynx(25,18),t.YNc(26,L,2,0,"th",15),t.YNc(27,w,2,1,"td",16),t.BQk(),t.ynx(28,19),t.YNc(29,q,2,0,"th",15),t.YNc(30,j,2,1,"td",16),t.BQk(),t.ynx(31,20),t.YNc(32,E,2,0,"th",15),t.YNc(33,M,2,3,"td",16),t.BQk(),t.ynx(34,21),t.YNc(35,B,2,0,"th",22),t.YNc(36,H,12,1,"td",23),t.BQk(),t.YNc(37,O,1,0,"tr",24),t.YNc(38,R,1,0,"tr",25),t.qZA()(),t.TgZ(39,"div",26),t._UZ(40,"mat-paginator",27),t.qZA()()()()()()()),2&e&&(t.xp6(7),t.Q6J("dataSource",o.dataSource),t.xp6(4),t.Q6J("loading",o.loading),t.xp6(1),t.Q6J("hidden",o.loading),t.xp6(6),t.Q6J("dataSource",o.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",o.columns),t.xp6(1),t.Q6J("matRowDefColumns",o.columns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(7,G)))},dependencies:[h.lW,y.Hw,U.d,u.a8,u.dn,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,g.YE,g.nU,x.NW,C.VK,C.OP,C.p6,F.s,S.N]}),n})();var l=i(4006),z=i(597),v=i(6895),f=i(9549),K=i(4144),k=i(4385),W=i(3238),P=i(9429);function V(n,a){if(1&n&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.cuentaID),t.xp6(1),t.AsE(" ",e.codigo,". ",e.nombre," ")}}function X(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"formErrorHandler"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.padreCuentaIDField)," ")}}function tt(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"formErrorHandler"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.codigoField))}}function et(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"formErrorHandler"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.nombreField)," ")}}function nt(n,a){if(1&n&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.empresaID),t.xp6(1),t.hij(" ",e.nombre," ")}}function ot(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"formErrorHandler"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.empresaIDField)," ")}}const at=function(){return["/workspace/catalogos/centros"]};let _=(()=>{class n{constructor(e,o,r,m,c,Z){this.formBuilder=e,this.activeRoute=o,this.router=r,this.cuentasContablesService=m,this.empresaService=c,this.notificationsService=Z,this.loading=!0,this.buildForm(),this.router.url.includes("/nuevo")?(this.edit=!1,this.baseKey="nuevo"):(this.activeRoute.params.subscribe(mt=>{this.cuentaID=Number(mt.ID)}),this.edit=!0,this.baseKey="edit",this.patchForm())}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.loading=!1,e.listCuentas=yield e.cuentasContablesService.getAll(),e.listEmpresas=yield e.empresaService.getAll()})()}create(e){e.preventDefault(),this.edit?this.update():this.save(),this.edit=!1}save(){var e=this;return(0,p.Z)(function*(){if(!0===e.form.valid){const o={empresaID:e.empresaIDField.value,padreCuentaID:e.padreCuentaIDField.value,codigo:e.codigoField.value,nombre:e.nombreField.value};yield e.cuentasContablesService.save(o).then(()=>{e.notificationsService.success(),e.router.navigate(["/workspace/catalogos/cuentas"])}).catch(r=>e.notificationsService.errorCatched(r)).finally(()=>e.loading=!1)}})()}update(){var e=this;return(0,p.Z)(function*(){if(!0===e.form.valid){const o={cuentaID:e.cuentaID,empresaID:e.empresaIDField.value,padreCuentaID:e.padreCuentaIDField.value,codigo:e.codigoField.value,nombre:e.nombreField.value};yield e.cuentasContablesService.update(e.cuentaID,o).then(()=>{e.notificationsService.success(),e.router.navigate(["/workspace/catalogos/cuentas"])}).catch(r=>e.notificationsService.errorCatched(r)).finally(()=>e.loading=!1)}})()}buildForm(){this.form=this.formBuilder.group({empresaID:["",[l.kI.required]],padreCuentaID:[""],codigo:["",[l.kI.required]],nombre:["",[l.kI.required]]})}patchForm(){var e=this;return(0,p.Z)(function*(){e.cuenta=yield e.cuentasContablesService.getByID(e.cuentaID),e.form.patchValue({empresaID:e.cuenta.empresaID,padreCuentaID:e.cuenta.padreCuentaID,codigo:e.cuenta.codigo,nombre:e.cuenta.nombre})})()}get empresaIDField(){return this.form.get("empresaID")}get padreCuentaIDField(){return this.form.get("padreCuentaID")}get codigoField(){return this.form.get("codigo")}get nombreField(){return this.form.get("nombre")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.QS),t.Y36(d.gz),t.Y36(d.F0),t.Y36(D.V),t.Y36(z.o),t.Y36(T.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-form"]],decls:55,vars:16,consts:[[1,"container-fluid"],[1,"d-flex","flex-wrap","justify-content-between"],[1,"d-flex","align-items-center","txt-blue2","mb-4"],[1,"title"],[3,"loading"],[1,"row",3,"hidden"],[1,"col-sm-12"],["form","form",3,"formGroup","ngSubmit"],[1,"subheader"],[1,"row"],[1,"form-group"],["appearance","outline"],["formControlName","padreCuentaID"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["appTrim","","matInput","","type","text","formControlName","codigo","minlength","1","maxlength","20",3,"formControl"],["align","end"],["appTrim","","matInput","","type","text","formControlName","nombre","minlength","1","maxlength","20",3,"formControl"],["formControlName","empresaID","required",""],[1,"form-group",2,"text-align","right !important"],["mat-button","",1,"w-auto",3,"routerLink"],["mat-raised-button","","type","submit",1,"bg-blue3","txt-white","squared-button","w-auto"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4," Cuentas Contables "),t.qZA()()(),t._UZ(5,"app-circular-loading",4),t.TgZ(6,"div",5)(7,"div",6)(8,"form",7),t.NdJ("ngSubmit",function(m){return o.create(m)}),t.TgZ(9,"mat-card")(10,"mat-card-header")(11,"mat-card-title")(12,"span",8),t._uU(13),t.qZA()()(),t.TgZ(14,"mat-card-content")(15,"div",9)(16,"div",6)(17,"div",10)(18,"mat-form-field",11)(19,"mat-label"),t._uU(20," Cuenta Padre "),t.qZA(),t.TgZ(21,"mat-select",12),t.YNc(22,V,2,3,"mat-option",13),t.qZA(),t.YNc(23,X,3,3,"mat-error",14),t.qZA()()(),t.TgZ(24,"div",6)(25,"div",10)(26,"mat-form-field",11)(27,"mat-label"),t._uU(28," Codigo "),t.qZA(),t._UZ(29,"input",15),t.YNc(30,tt,3,3,"mat-error",14),t.TgZ(31,"mat-hint",16),t._uU(32),t.qZA()()()(),t.TgZ(33,"div",6)(34,"div",10)(35,"mat-form-field",11)(36,"mat-label"),t._uU(37," Nombre "),t.qZA(),t._UZ(38,"input",17),t.YNc(39,et,3,3,"mat-error",14),t.TgZ(40,"mat-hint",16),t._uU(41),t.qZA()()()(),t.TgZ(42,"div",6)(43,"div",10)(44,"mat-form-field",11)(45,"mat-label"),t._uU(46," Empresa "),t.qZA(),t.TgZ(47,"mat-select",18),t.YNc(48,nt,2,2,"mat-option",13),t.qZA(),t.YNc(49,ot,3,3,"mat-error",14),t.qZA()()()()(),t.TgZ(50,"mat-card-actions",19)(51,"a",20),t._uU(52," Cancelar "),t.qZA(),t.TgZ(53,"button",21),t._uU(54," Guardar "),t.qZA()()()()()()()),2&e&&(t.xp6(5),t.Q6J("loading",o.loading),t.xp6(1),t.Q6J("hidden",o.loading),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu("nuevo"===o.baseKey?"Nueva Cuentas Contables":"Editar Cuentas Contables"),t.xp6(9),t.Q6J("ngForOf",o.listCuentas),t.xp6(1),t.Q6J("ngIf",o.padreCuentaIDField.errors),t.xp6(6),t.Q6J("formControl",o.codigoField),t.xp6(1),t.Q6J("ngIf",o.codigoField.errors),t.xp6(2),t.hij("",null==o.codigoField.value?null:o.codigoField.value.length," / 2"),t.xp6(6),t.Q6J("formControl",o.nombreField),t.xp6(1),t.Q6J("ngIf",o.nombreField.errors),t.xp6(2),t.hij("",null==o.nombreField.value?null:o.nombreField.value.length," / 20"),t.xp6(7),t.Q6J("ngForOf",o.listEmpresas),t.xp6(1),t.Q6J("ngIf",o.empresaIDField.errors),t.xp6(2),t.Q6J("routerLink",t.DdM(15,at)))},dependencies:[v.sg,v.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.wO,l.nD,l.oH,l.sg,l.u,h.lW,h.zs,u.a8,u.dk,u.dn,u.n5,u.hq,f.TO,f.KE,f.bx,f.hX,K.Nt,k.gD,W.ey,F.s,d.yS,P.P]}),n})();const it=[{path:"",component:$},{path:"nuevo",component:_},{path:"edit/:ID",component:_}];let rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.Bz.forChild(it),d.Bz]}),n})();var lt=i(4185);let st=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[v.ez,lt.m,rt]}),n})()}}]);